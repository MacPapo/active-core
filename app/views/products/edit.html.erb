<% content_for :title, "Modifica #{@product.name}" %>

<h1>Modifica <%= @product.name %></h1>

<%= form_with model: @product, local: true do |form| %>
    <% if @product.errors.any? %>
        <div class="error-messages">
            <% @product.errors.full_messages.each do |message| %>
                <p><%= message %></p>
            <% end %>
        </div>
    <% end %>

    <div class="form-group">
        <%= form.label :name, "Nome" %>
        <%= form.text_field :name, required: true %>
    </div>

    <div class="form-group">
        <%= form.label :product_type, "Tipo Prodotto" %>
        <%= form.select :product_type,
            options_for_select([
                ["Corso", "course"],
                ["Attività", "activity"],
                ["Membership", "membership"],
                ["Servizio", "service"]
            ], @product.product_type),
         {},
         { required: true } %>
    </div>

    <div class="form-group">
        <%= form.label :description, "Descrizione" %>
        <%= form.text_area :description, rows: 4 %>
    </div>

    <div class="form-group">
        <%= form.label :capacity, "Capacità (lascia vuoto per illimitata)" %>
        <%= form.number_field :capacity, min: 1 %>
    </div>

    <div class="form-group">
        <%= form.check_box :requires_membership %>
        <%= form.label :requires_membership, "Richiede Membership" %>
    </div>

    <div class="form-group">
        <%= form.check_box :active %>
        <%= form.label :active, "Attivo" %>
    </div>

    <div class="form-actions">
        <%= form.submit "Aggiorna Prodotto", class: "btn btn-primary" %>
        <%= link_to "Annulla", @product, class: "btn btn-secondary" %>
    </div>
<% end %>
